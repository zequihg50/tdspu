<?xml version="1.0" encoding="UTF-8"?>
<netcdf xmlns="http://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2">
  <attribute name="size" type="int" value="{{ size }}" />
  <attribute name="size_human" value="{{ size|filesizeformat }}" />

  <aggregation type="union">
    {% for aggregation in aggregations -%}

    <netcdf>
      <variable name="time" orgName="time">
        <attribute name="units" value="{{ aggregation.time_units }}" />
        <values start="{{ aggregation.time_start }}" increment="{{ aggregation.time_increment }}" />
      </variable>
      <dimension name="time" orgName="time" />
      <aggregation type="joinExisting" dimName="time">
	{% for f in aggregation.files %}
	<netcdf location="{{ f }}" ncoords="{{ ncoords(f, 'time') }}" />
	{% endfor %}
      </aggregation>
    </netcdf>
    {% endfor %}

    {% for fx in fxs -%}
    <netcdf location="{{ fx }}" />
    {% endfor %}
  </aggregation>
</netcdf>
